import json
from datetime import datetime, timezone

# after you compute good_sorted + bad:

payload = {
    "generated_utc": datetime.now(timezone.utc).strftime("%Y-%m-%d %H:%M UTC"),
    "play_date": play_date,
    "min_players": min_players,
    "latest_time": latest_time_str,
    "results": [
        {
            "course": r.course,
            "tee_time": r.tee_time,
            "players_hint": r.players_hint,   # this should be an int or string, whatever you store
            "booking_url": r.booking_url,
        }
        for r in (good_sorted + bad)
        if r.tee_time
    ],
}

os.makedirs("docs", exist_ok=True)
with open("docs/results.json", "w", encoding="utf-8") as f:
    json.dump(payload, f, indent=2)
